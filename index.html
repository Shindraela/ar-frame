<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <title>ar-frame</title>
    <!-- Include A-Frame -->
    <script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
    <!-- Include ar.js for A-Frame -->
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <!-- Materialize Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Materialize Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Sweetalert -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>


    <style>
        body {
            margin : 0px; 
            overflow: hidden;
        }

        #buttons {
            position:absolute;
            top:10px;
            left:10px;
        }

        #btnPersoRandom {
            position:relative;
            top:10px;
            left:10px;
        }

        #btnArt {
            position:relative;
            top:10px;
            left:10px;
        }
    </style>
</head>

<body>

    <script>
        THREEx.ArToolkitContext.baseURL = 'https://rawgit.com/jeromeetienne/ar.js/master/three.js/';
    </script>

    <a-scene embedded arjs>
        <a-image id="1" src="assets/fond.jpg" rotation="-90 0 0"></a-image>

        <a-marker-camera type='hijo'></a-marker-camera>
    </a-scene>

    <div id="buttons">
        <button class="waves-effect waves-light btn" id="btnPersoRandom" type="button">Mode perso random</button>
        <button class="waves-effect waves-light btn" id="btnArt" type="button">Mode art</button>
    </div>

    <script>
        (function () {
            setTimeout(function () {
                $('.a-enter-vr-button').hide();
                $('#arjsDebugUIContainer').hide();
            }, 100);
        })();

        var artInterval;
        var imgPersoInterval;

        var artArray = ['art1.jpg', 'art2.jpg', 'art3.jpg', 'art4.jpg'];
        var artBasePath = "assets/art/";
        function art() {
            for (var i = 0; i < 4; i++) {
                var randArt = artArray[Math.floor(Math.random() * artArray.length)];
                imageArt = artBasePath + randArt;
            }

            // Condition for not displaying same pic twice
            if (imageArt != $('#1').attr('src')) {
                $('#1').attr('src', imageArt);
            } else {
                art();
            }
        }

        var persoArray = ['perso1.jpg', 'perso2.jpg', 'perso3.jpg', 'perso4.jpg'];
        var persoBasePath = "assets/perso/";
        function persoRandom() {
            for (var i = 0; i < 4; i++) {
                var randPerso = persoArray[Math.floor(Math.random() * persoArray.length)];
                imagePersoRand = persoBasePath + randPerso;
            }

            // Condition for not displaying same pic twice
            if (imagePersoRand != $('#1').attr('src')) {
                $('#1').attr('src', imagePersoRand);
            } else {
                persoRandom();
            }
        }

        $('#btnArt').on('click', function () {
            swal("Mode art activé avec succès");
            artInterval = setInterval(art, 5000);
            if (typeof imgPersoInterval !== "undefined") {
                clearInterval(imgPersoInterval);
            }
        });

        $('#btnPersoRandom').on('click', function () {
            swal("Mode photos personnelles random activé avec succès");
            imgPersoInterval = setInterval(persoRandom, 5000);
            if (typeof artInterval !== "undefined") {
                clearInterval(artInterval);
            }
        });
    </script>
</body>

</html>